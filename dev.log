$ next dev -p 3000
▲ Next.js 16.1.3 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://21.0.4.243:3000
- Environments: .env

✓ Starting...
✓ Ready in 1005ms
 GET / 200 in 2.9s (compile: 2.5s, render: 346ms)
 GET /api/auth/session 200 in 214ms (compile: 171ms, render: 43ms)
 GET /login 200 in 287ms (compile: 215ms, render: 72ms)
prisma:query SELECT `main`.`Category`.`id`, `main`.`Category`.`name`, `main`.`Category`.`description`, `main`.`Category`.`sortOrder`, `main`.`Category`.`isActive`, `main`.`Category`.`defaultVariantTypeId`, `main`.`Category`.`createdAt`, `main`.`Category`.`updatedAt`, COALESCE(`aggr_selection_0_MenuItem`.`_aggr_count_menuItems`, 0) AS `_aggr_count_menuItems` FROM `main`.`Category` LEFT JOIN (SELECT `main`.`MenuItem`.`categoryId`, COUNT(*) AS `_aggr_count_menuItems` FROM `main`.`MenuItem` WHERE 1=1 GROUP BY `main`.`MenuItem`.`categoryId`) AS `aggr_selection_0_MenuItem` ON (`main`.`Category`.`id` = `aggr_selection_0_MenuItem`.`categoryId`) WHERE `main`.`Category`.`isActive` = ? ORDER BY `main`.`Category`.`sortOrder` ASC, `main`.`Category`.`name` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`DeliveryArea`.`id`, `main`.`DeliveryArea`.`name`, `main`.`DeliveryArea`.`fee`, `main`.`DeliveryArea`.`isActive`, `main`.`DeliveryArea`.`createdAt`, `main`.`DeliveryArea`.`updatedAt` FROM `main`.`DeliveryArea` WHERE 1=1 ORDER BY `main`.`DeliveryArea`.`name` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`MenuItem`.`id`, `main`.`MenuItem`.`name`, `main`.`MenuItem`.`category`, `main`.`MenuItem`.`categoryId`, `main`.`MenuItem`.`price`, `main`.`MenuItem`.`taxRate`, `main`.`MenuItem`.`isActive`, `main`.`MenuItem`.`imagePath`, `main`.`MenuItem`.`sortOrder`, `main`.`MenuItem`.`hasVariants`, `main`.`MenuItem`.`version`, `main`.`MenuItem`.`createdAt`, `main`.`MenuItem`.`updatedAt` FROM `main`.`MenuItem` WHERE `main`.`MenuItem`.`isActive` = ? ORDER BY `main`.`MenuItem`.`sortOrder` ASC, `main`.`MenuItem`.`name` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Recipe`.`id`, `main`.`Recipe`.`menuItemId`, `main`.`Recipe`.`ingredientId`, `main`.`Recipe`.`quantityRequired`, `main`.`Recipe`.`unit`, `main`.`Recipe`.`menuItemVariantId`, `main`.`Recipe`.`version`, `main`.`Recipe`.`createdAt`, `main`.`Recipe`.`updatedAt` FROM `main`.`Recipe` WHERE `main`.`Recipe`.`menuItemId` IN (?,?,?,?,?,?,?,?,?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Category`.`id`, `main`.`Category`.`name` FROM `main`.`Category` WHERE `main`.`Category`.`id` IN (?,?,?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`MenuItemVariant`.`id`, `main`.`MenuItemVariant`.`menuItemId`, `main`.`MenuItemVariant`.`variantTypeId`, `main`.`MenuItemVariant`.`variantOptionId`, `main`.`MenuItemVariant`.`priceModifier`, `main`.`MenuItemVariant`.`sortOrder`, `main`.`MenuItemVariant`.`isActive`, `main`.`MenuItemVariant`.`createdAt`, `main`.`MenuItemVariant`.`updatedAt` FROM `main`.`MenuItemVariant` WHERE `main`.`MenuItemVariant`.`menuItemId` IN (?,?,?,?,?,?,?,?,?) ORDER BY `main`.`MenuItemVariant`.`sortOrder` ASC LIMIT ? OFFSET ?
 GET /api/categories?active=true 200 in 264ms (compile: 111ms, render: 153ms)
 GET /api/delivery-areas 200 in 267ms (compile: 138ms, render: 129ms)
 GET /api/menu-items?active=true&includeVariants=true 200 in 57ms (compile: 36ms, render: 21ms)
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`isActive`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`createdAt` FROM `main`.`Branch` WHERE `main`.`Branch`.`isActive` = ? ORDER BY `main`.`Branch`.`branchName` ASC LIMIT ? OFFSET ?
 GET /api/branches 200 in 310ms (compile: 116ms, render: 194ms)
 GET /api/branches 200 in 9ms (compile: 4ms, render: 5ms)
 GET /api/branches 200 in 8ms (compile: 3ms, render: 5ms)
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE `main`.`BranchInventory`.`branchId` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`reorderThreshold` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?,?,?,?,?) LIMIT ? OFFSET ?
 GET /api/inventory/low-stock?branchId=cml46do4s0001ob5gs267tqmu 200 in 40ms (compile: 31ms, render: 9ms)
 GET /api/couriers?branchId=cml46do4s0001ob5gs267tqmu 200 in 37ms (compile: 29ms, render: 8ms)
prisma:query SELECT `main`.`Courier`.`id`, `main`.`Courier`.`name`, `main`.`Courier`.`phone`, `main`.`Courier`.`branchId`, `main`.`Courier`.`isActive`, `main`.`Courier`.`createdAt`, `main`.`Courier`.`updatedAt` FROM `main`.`Courier` WHERE `main`.`Courier`.`branchId` = ? ORDER BY `main`.`Courier`.`name` ASC LIMIT ? OFFSET ?
 GET / 200 in 18ms (compile: 3ms, render: 15ms)
 GET /api/branches 200 in 7ms (compile: 2ms, render: 5ms)
 GET /api/categories?active=true 200 in 9ms (compile: 1952µs, render: 7ms)
prisma:query SELECT `main`.`Category`.`id`, `main`.`Category`.`name`, `main`.`Category`.`description`, `main`.`Category`.`sortOrder`, `main`.`Category`.`isActive`, `main`.`Category`.`defaultVariantTypeId`, `main`.`Category`.`createdAt`, `main`.`Category`.`updatedAt`, COALESCE(`aggr_selection_0_MenuItem`.`_aggr_count_menuItems`, 0) AS `_aggr_count_menuItems` FROM `main`.`Category` LEFT JOIN (SELECT `main`.`MenuItem`.`categoryId`, COUNT(*) AS `_aggr_count_menuItems` FROM `main`.`MenuItem` WHERE 1=1 GROUP BY `main`.`MenuItem`.`categoryId`) AS `aggr_selection_0_MenuItem` ON (`main`.`Category`.`id` = `aggr_selection_0_MenuItem`.`categoryId`) WHERE `main`.`Category`.`isActive` = ? ORDER BY `main`.`Category`.`sortOrder` ASC, `main`.`Category`.`name` ASC LIMIT ? OFFSET ?
 GET /api/menu-items?active=true&includeVariants=true 200 in 8ms (compile: 3ms, render: 5ms)
prisma:query SELECT `main`.`DeliveryArea`.`id`, `main`.`DeliveryArea`.`name`, `main`.`DeliveryArea`.`fee`, `main`.`DeliveryArea`.`isActive`, `main`.`DeliveryArea`.`createdAt`, `main`.`DeliveryArea`.`updatedAt` FROM `main`.`DeliveryArea` WHERE 1=1 ORDER BY `main`.`DeliveryArea`.`name` ASC LIMIT ? OFFSET ?
 GET /api/delivery-areas 200 in 47ms (compile: 41ms, render: 6ms)
 GET /api/branches 200 in 7ms (compile: 1925µs, render: 5ms)
prisma:query SELECT `main`.`Courier`.`id`, `main`.`Courier`.`name`, `main`.`Courier`.`phone`, `main`.`Courier`.`branchId`, `main`.`Courier`.`isActive`, `main`.`Courier`.`createdAt`, `main`.`Courier`.`updatedAt` FROM `main`.`Courier` WHERE `main`.`Courier`.`branchId` = ? ORDER BY `main`.`Courier`.`name` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE `main`.`BranchInventory`.`branchId` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`reorderThreshold` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?,?,?,?,?) LIMIT ? OFFSET ?
 GET /api/couriers?branchId=cml46do4s0001ob5gs267tqmu 200 in 12ms (compile: 2ms, render: 10ms)
 GET /api/inventory/low-stock?branchId=cml46do4s0001ob5gs267tqmu 200 in 13ms (compile: 6ms, render: 8ms)
 GET / 200 in 46ms (compile: 3ms, render: 43ms)
 GET /api/branches 200 in 13ms (compile: 6ms, render: 7ms)
prisma:query SELECT 1
prisma:query SELECT `main`.`DeliveryArea`.`id`, `main`.`DeliveryArea`.`name`, `main`.`DeliveryArea`.`fee`, `main`.`DeliveryArea`.`isActive`, `main`.`DeliveryArea`.`createdAt`, `main`.`DeliveryArea`.`updatedAt` FROM `main`.`DeliveryArea` WHERE 1=1 ORDER BY `main`.`DeliveryArea`.`name` ASC LIMIT ? OFFSET ?
 GET /api/delivery-areas 200 in 11ms (compile: 2ms, render: 9ms)
 GET /api/auth/session 200 in 11ms (compile: 6ms, render: 5ms)
 GET /api/menu-items?active=true&includeVariants=true 200 in 11ms (compile: 6ms, render: 4ms)
 GET /api/categories?active=true 200 in 14ms (compile: 3ms, render: 11ms)
prisma:query SELECT `main`.`Category`.`id`, `main`.`Category`.`name`, `main`.`Category`.`description`, `main`.`Category`.`sortOrder`, `main`.`Category`.`isActive`, `main`.`Category`.`defaultVariantTypeId`, `main`.`Category`.`createdAt`, `main`.`Category`.`updatedAt`, COALESCE(`aggr_selection_0_MenuItem`.`_aggr_count_menuItems`, 0) AS `_aggr_count_menuItems` FROM `main`.`Category` LEFT JOIN (SELECT `main`.`MenuItem`.`categoryId`, COUNT(*) AS `_aggr_count_menuItems` FROM `main`.`MenuItem` WHERE 1=1 GROUP BY `main`.`MenuItem`.`categoryId`) AS `aggr_selection_0_MenuItem` ON (`main`.`Category`.`id` = `aggr_selection_0_MenuItem`.`categoryId`) WHERE `main`.`Category`.`isActive` = ? ORDER BY `main`.`Category`.`sortOrder` ASC, `main`.`Category`.`name` ASC LIMIT ? OFFSET ?
 GET /login 200 in 73ms (compile: 12ms, render: 61ms)
 GET /api/branches 200 in 4ms (compile: 1572µs, render: 3ms)
 GET /api/branches 200 in 6ms (compile: 1577µs, render: 4ms)
 GET /api/couriers?branchId=cml46do4s0001ob5gs267tqmu 200 in 8ms (compile: 1940µs, render: 6ms)
prisma:query SELECT `main`.`Courier`.`id`, `main`.`Courier`.`name`, `main`.`Courier`.`phone`, `main`.`Courier`.`branchId`, `main`.`Courier`.`isActive`, `main`.`Courier`.`createdAt`, `main`.`Courier`.`updatedAt` FROM `main`.`Courier` WHERE `main`.`Courier`.`branchId` = ? ORDER BY `main`.`Courier`.`name` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE `main`.`BranchInventory`.`branchId` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`reorderThreshold` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?,?,?,?,?) LIMIT ? OFFSET ?
 GET /api/inventory/low-stock?branchId=cml46do4s0001ob5gs267tqmu 200 in 8ms (compile: 2ms, render: 5ms)
 GET / 200 in 24ms (compile: 2ms, render: 21ms)
 GET /api/branches 200 in 6ms (compile: 2ms, render: 4ms)
prisma:query SELECT `main`.`DeliveryArea`.`id`, `main`.`DeliveryArea`.`name`, `main`.`DeliveryArea`.`fee`, `main`.`DeliveryArea`.`isActive`, `main`.`DeliveryArea`.`createdAt`, `main`.`DeliveryArea`.`updatedAt` FROM `main`.`DeliveryArea` WHERE 1=1 ORDER BY `main`.`DeliveryArea`.`name` ASC LIMIT ? OFFSET ?
 GET /api/delivery-areas 200 in 10ms (compile: 6ms, render: 4ms)
 GET /api/menu-items?active=true&includeVariants=true 200 in 7ms (compile: 4ms, render: 3ms)
 GET /api/categories?active=true 200 in 9ms (compile: 1560µs, render: 8ms)
prisma:query SELECT `main`.`Category`.`id`, `main`.`Category`.`name`, `main`.`Category`.`description`, `main`.`Category`.`sortOrder`, `main`.`Category`.`isActive`, `main`.`Category`.`defaultVariantTypeId`, `main`.`Category`.`createdAt`, `main`.`Category`.`updatedAt`, COALESCE(`aggr_selection_0_MenuItem`.`_aggr_count_menuItems`, 0) AS `_aggr_count_menuItems` FROM `main`.`Category` LEFT JOIN (SELECT `main`.`MenuItem`.`categoryId`, COUNT(*) AS `_aggr_count_menuItems` FROM `main`.`MenuItem` WHERE 1=1 GROUP BY `main`.`MenuItem`.`categoryId`) AS `aggr_selection_0_MenuItem` ON (`main`.`Category`.`id` = `aggr_selection_0_MenuItem`.`categoryId`) WHERE `main`.`Category`.`isActive` = ? ORDER BY `main`.`Category`.`sortOrder` ASC, `main`.`Category`.`name` ASC LIMIT ? OFFSET ?
 GET /api/branches 200 in 9ms (compile: 3ms, render: 6ms)
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE `main`.`BranchInventory`.`branchId` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`reorderThreshold` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?,?,?,?,?) LIMIT ? OFFSET ?
 GET /api/inventory/low-stock?branchId=cml46do4s0001ob5gs267tqmu 200 in 10ms (compile: 1969µs, render: 8ms)
prisma:query SELECT `main`.`Courier`.`id`, `main`.`Courier`.`name`, `main`.`Courier`.`phone`, `main`.`Courier`.`branchId`, `main`.`Courier`.`isActive`, `main`.`Courier`.`createdAt`, `main`.`Courier`.`updatedAt` FROM `main`.`Courier` WHERE `main`.`Courier`.`branchId` = ? ORDER BY `main`.`Courier`.`name` ASC LIMIT ? OFFSET ?
 GET /api/couriers?branchId=cml46do4s0001ob5gs267tqmu 200 in 8ms (compile: 1786µs, render: 6ms)
prisma:query SELECT 1
prisma:query SELECT `main`.`Category`.`id`, `main`.`Category`.`name`, `main`.`Category`.`description`, `main`.`Category`.`sortOrder`, `main`.`Category`.`isActive`, `main`.`Category`.`defaultVariantTypeId`, `main`.`Category`.`createdAt`, `main`.`Category`.`updatedAt`, COALESCE(`aggr_selection_0_MenuItem`.`_aggr_count_menuItems`, 0) AS `_aggr_count_menuItems` FROM `main`.`Category` LEFT JOIN (SELECT `main`.`MenuItem`.`categoryId`, COUNT(*) AS `_aggr_count_menuItems` FROM `main`.`MenuItem` WHERE 1=1 GROUP BY `main`.`MenuItem`.`categoryId`) AS `aggr_selection_0_MenuItem` ON (`main`.`Category`.`id` = `aggr_selection_0_MenuItem`.`categoryId`) WHERE `main`.`Category`.`isActive` = ? ORDER BY `main`.`Category`.`sortOrder` ASC, `main`.`Category`.`name` ASC LIMIT ? OFFSET ?
 GET /api/categories?active=true 200 in 9ms (compile: 4ms, render: 5ms)
 GET /api/menu-items?active=true&includeVariants=true 200 in 8ms (compile: 1372µs, render: 7ms)
prisma:query SELECT `main`.`VariantType`.`id`, `main`.`VariantType`.`name`, `main`.`VariantType`.`description`, `main`.`VariantType`.`isActive`, `main`.`VariantType`.`createdAt`, `main`.`VariantType`.`updatedAt`, COALESCE(`aggr_selection_0_MenuItemVariant`.`_aggr_count_menuItemVariants`, 0) AS `_aggr_count_menuItemVariants` FROM `main`.`VariantType` LEFT JOIN (SELECT `main`.`MenuItemVariant`.`variantTypeId`, COUNT(*) AS `_aggr_count_menuItemVariants` FROM `main`.`MenuItemVariant` WHERE 1=1 GROUP BY `main`.`MenuItemVariant`.`variantTypeId`) AS `aggr_selection_0_MenuItemVariant` ON (`main`.`VariantType`.`id` = `aggr_selection_0_MenuItemVariant`.`variantTypeId`) WHERE `main`.`VariantType`.`isActive` = ? ORDER BY `main`.`VariantType`.`name` ASC LIMIT ? OFFSET ?
 GET /api/variant-types?active=true&includeOptions=true 200 in 108ms (compile: 103ms, render: 5ms)
 GET /api/branches 200 in 5ms (compile: 1571µs, render: 3ms)
prisma:query SELECT `main`.`Customer`.`id`, `main`.`Customer`.`name`, `main`.`Customer`.`phone`, `main`.`Customer`.`email`, `main`.`Customer`.`notes`, `main`.`Customer`.`branchId`, `main`.`Customer`.`loyaltyPoints`, `main`.`Customer`.`tier`, `main`.`Customer`.`totalSpent`, `main`.`Customer`.`orderCount`, `main`.`Customer`.`createdAt`, `main`.`Customer`.`updatedAt` FROM `main`.`Customer` WHERE 1=1 ORDER BY `main`.`Customer`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/customers?currentUserRole=ADMIN&currentUserBranchId= 200 in 89ms (compile: 83ms, render: 6ms)
prisma:query SELECT `main`.`DeliveryArea`.`id`, `main`.`DeliveryArea`.`name`, `main`.`DeliveryArea`.`fee`, `main`.`DeliveryArea`.`isActive`, `main`.`DeliveryArea`.`createdAt`, `main`.`DeliveryArea`.`updatedAt` FROM `main`.`DeliveryArea` WHERE 1=1 ORDER BY `main`.`DeliveryArea`.`name` ASC LIMIT ? OFFSET ?
 GET /api/delivery-areas 200 in 4ms (compile: 1041µs, render: 3ms)
 GET /api/branches 200 in 5ms (compile: 1642µs, render: 4ms)
 GET /api/costs? 200 in 134ms (compile: 80ms, render: 55ms)
prisma:query SELECT `main`.`BranchCost`.`id`, `main`.`BranchCost`.`branchId`, `main`.`BranchCost`.`costCategoryId`, `main`.`BranchCost`.`amount`, `main`.`BranchCost`.`period`, `main`.`BranchCost`.`notes`, `main`.`BranchCost`.`createdAt`, `main`.`BranchCost`.`updatedAt` FROM `main`.`BranchCost` WHERE 1=1 ORDER BY `main`.`BranchCost`.`period` DESC, `main`.`BranchCost`.`createdAt` DESC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`BranchCost`.`id`, `main`.`BranchCost`.`branchId`, `main`.`BranchCost`.`costCategoryId`, `main`.`BranchCost`.`amount`, `main`.`BranchCost`.`period`, `main`.`BranchCost`.`notes`, `main`.`BranchCost`.`createdAt`, `main`.`BranchCost`.`updatedAt` FROM `main`.`BranchCost` LEFT JOIN `main`.`Branch` AS `orderby_1` ON (`orderby_1`.`id`) = (`main`.`BranchCost`.`branchId`) WHERE 1=1 ORDER BY `main`.`BranchCost`.`period` DESC, `orderby_1`.`branchName` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`CostCategory`.`id`, `main`.`CostCategory`.`name`, `main`.`CostCategory`.`description`, `main`.`CostCategory`.`icon`, `main`.`CostCategory`.`sortOrder`, `main`.`CostCategory`.`isActive`, `main`.`CostCategory`.`createdAt`, `main`.`CostCategory`.`updatedAt` FROM `main`.`CostCategory` WHERE 1=1 ORDER BY `main`.`CostCategory`.`sortOrder` ASC, `main`.`CostCategory`.`name` ASC LIMIT ? OFFSET ?
 GET /api/costs/summary? 200 in 131ms (compile: 97ms, render: 34ms)
 GET /api/cost-categories 200 in 139ms (compile: 128ms, render: 12ms)
 GET /api/branches 200 in 5ms (compile: 1638µs, render: 3ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE `main`.`BranchInventory`.`branchId` = ? LIMIT ? OFFSET ?
 GET /api/ingredients?branchId=cml46do4s0001ob5gs267tqmu 200 in 89ms (compile: 81ms, render: 8ms)
 GET /api/inventory/transactions?branchId=cml46do4s0001ob5gs267tqmu&limit=50 404 in 474ms (compile: 424ms, render: 50ms)
 GET /api/customers?currentUserRole=ADMIN&currentUserBranchId= 200 in 7ms (compile: 2ms, render: 5ms)
prisma:query SELECT `main`.`Customer`.`id`, `main`.`Customer`.`name`, `main`.`Customer`.`phone`, `main`.`Customer`.`email`, `main`.`Customer`.`notes`, `main`.`Customer`.`branchId`, `main`.`Customer`.`loyaltyPoints`, `main`.`Customer`.`tier`, `main`.`Customer`.`totalSpent`, `main`.`Customer`.`orderCount`, `main`.`Customer`.`createdAt`, `main`.`Customer`.`updatedAt` FROM `main`.`Customer` WHERE 1=1 ORDER BY `main`.`Customer`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/branches 200 in 5ms (compile: 3ms, render: 2ms)
prisma:query SELECT `main`.`DeliveryArea`.`id`, `main`.`DeliveryArea`.`name`, `main`.`DeliveryArea`.`fee`, `main`.`DeliveryArea`.`isActive`, `main`.`DeliveryArea`.`createdAt`, `main`.`DeliveryArea`.`updatedAt` FROM `main`.`DeliveryArea` WHERE 1=1 ORDER BY `main`.`DeliveryArea`.`name` ASC LIMIT ? OFFSET ?
 GET /api/delivery-areas 200 in 4ms (compile: 993µs, render: 3ms)
 GET /api/branches 200 in 8ms (compile: 4ms, render: 4ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
 GET /api/ingredients 200 in 12ms (compile: 1676µs, render: 10ms)
Fetching transfers with where clause: {}
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE 1=1 ORDER BY `main`.`InventoryTransfer`.`requestedAt` DESC LIMIT ? OFFSET ?
prisma:query SELECT 1
Found transfers: 0
Total transfers: 0
 GET /api/transfers?status= 200 in 295ms (compile: 285ms, render: 10ms)
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`InventoryTransfer`.`id` FROM `main`.`InventoryTransfer` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
 GET /api/branches 200 in 5ms (compile: 1767µs, render: 3ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
 GET /api/ingredients 200 in 7ms (compile: 1710µs, render: 6ms)
Fetching transfers with where clause: {}
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`InventoryTransfer`.`id` FROM `main`.`InventoryTransfer` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE 1=1 ORDER BY `main`.`InventoryTransfer`.`requestedAt` DESC LIMIT ? OFFSET ?
Found transfers: 0
Total transfers: 0
 GET /api/transfers?status= 200 in 9ms (compile: 1810µs, render: 7ms)
Received transfer request: {
  sourceBranchId: 'cml46do4s0001ob5gs267tqmu',
  targetBranchId: 'cml46do4q0000ob5g27krklqe',
  transferNumber: 'TR-1770834695379',
  notes: '',
  items: [
    {
      ingredientId: 'cmlicqk6v0009omv1t808ac3u',
      quantity: 1,
      unit: 'kg'
    }
  ]
}
Validated transfer data: {
  sourceBranchId: 'cml46do4s0001ob5gs267tqmu',
  targetBranchId: 'cml46do4q0000ob5g27krklqe',
  transferNumber: 'TR-1770834695379',
  notes: '',
  items: [
    {
      ingredientId: 'cmlicqk6v0009omv1t808ac3u',
      quantity: 1,
      unit: 'kg'
    }
  ]
}
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE (`main`.`InventoryTransfer`.`transferNumber` = ? AND 1=1) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE ((`main`.`BranchInventory`.`branchId` = ? AND `main`.`BranchInventory`.`ingredientId` = ?) AND 1=1) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE ((`main`.`BranchInventory`.`branchId` = ? AND `main`.`BranchInventory`.`ingredientId` = ?) AND 1=1) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`username`, `main`.`User`.`email`, `main`.`User`.`passwordHash`, `main`.`User`.`name`, `main`.`User`.`role`, `main`.`User`.`branchId`, `main`.`User`.`isActive`, `main`.`User`.`createdAt`, `main`.`User`.`updatedAt` FROM `main`.`User` WHERE `main`.`User`.`role` = ? LIMIT ? OFFSET ?
prisma:query BEGIN IMMEDIATE
prisma:query INSERT INTO `main`.`InventoryTransfer` (`id`, `transferNumber`, `sourceBranchId`, `targetBranchId`, `status`, `requestedAt`, `notes`, `requestedBy`, `createdAt`, `updatedAt`) VALUES (?,?,?,?,?,?,?,?,?,?) RETURNING `id` AS `id`
prisma:query INSERT INTO `main`.`InventoryTransferItem` (`id`, `transferId`, `ingredientId`, `sourceInventoryId`, `targetInventoryId`, `quantity`, `unit`, `createdAt`) VALUES (?,?,?,?,?,?,?,?) RETURNING `id` AS `id`
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE `main`.`InventoryTransfer`.`id` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
 POST /api/transfers 201 in 20ms (compile: 2ms, render: 18ms)
prisma:query COMMIT
Fetching transfers with where clause: {}
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`InventoryTransfer`.`id` FROM `main`.`InventoryTransfer` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE 1=1 ORDER BY `main`.`InventoryTransfer`.`requestedAt` DESC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
Found transfers: 1
Total transfers: 1
 GET /api/transfers?status= 200 in 10ms (compile: 2ms, render: 8ms)
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`name`, `main`.`User`.`username` FROM `main`.`User` WHERE `main`.`User`.`id` IN (?) LIMIT ? OFFSET ?
 GET /api/ingredients 200 in 7ms (compile: 3ms, render: 5ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
 GET /api/branches 200 in 6ms (compile: 3ms, render: 3ms)
prisma:query SELECT 1
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE (`main`.`InventoryTransfer`.`id` = ? AND 1=1) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query BEGIN IMMEDIATE
prisma:query UPDATE `main`.`InventoryTransfer` SET `status` = ?, `approvedBy` = ?, `approvedAt` = ?, `updatedAt` = ? WHERE (`main`.`InventoryTransfer`.`id` = ? AND 1=1) RETURNING `id` AS `id`, `transferNumber` AS `transferNumber`, `sourceBranchId` AS `sourceBranchId`, `targetBranchId` AS `targetBranchId`, `status` AS `status`, `requestedAt` AS `requestedAt`, `completedAt` AS `completedAt`, `notes` AS `notes`, `requestedBy` AS `requestedBy`, `approvedBy` AS `approvedBy`, `approvedAt` AS `approvedAt`, `completedBy` AS `completedBy`, `createdAt` AS `createdAt`, `updatedAt` AS `updatedAt`
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE `main`.`InventoryTransfer`.`id` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query COMMIT
 PUT /api/transfers/cmlid98oe0001om7qle6uyimg 200 in 837ms (compile: 816ms, render: 21ms)
Fetching transfers with where clause: {}
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`InventoryTransfer`.`id` FROM `main`.`InventoryTransfer` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE 1=1 ORDER BY `main`.`InventoryTransfer`.`requestedAt` DESC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`name`, `main`.`User`.`username` FROM `main`.`User` WHERE `main`.`User`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`name`, `main`.`User`.`username` FROM `main`.`User` WHERE `main`.`User`.`id` IN (?) LIMIT ? OFFSET ?
Found transfers: 1
Total transfers: 1
 GET /api/transfers?status= 200 in 12ms (compile: 3ms, render: 9ms)
 GET /api/branches 200 in 5ms (compile: 1667µs, render: 3ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
 GET /api/ingredients 200 in 7ms (compile: 1849µs, render: 5ms)
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE (`main`.`InventoryTransfer`.`id` = ? AND 1=1) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query BEGIN IMMEDIATE
prisma:query UPDATE `main`.`InventoryTransfer` SET `status` = ?, `updatedAt` = ? WHERE (`main`.`InventoryTransfer`.`id` = ? AND 1=1) RETURNING `id` AS `id`, `transferNumber` AS `transferNumber`, `sourceBranchId` AS `sourceBranchId`, `targetBranchId` AS `targetBranchId`, `status` AS `status`, `requestedAt` AS `requestedAt`, `completedAt` AS `completedAt`, `notes` AS `notes`, `requestedBy` AS `requestedBy`, `approvedBy` AS `approvedBy`, `approvedAt` AS `approvedAt`, `completedBy` AS `completedBy`, `createdAt` AS `createdAt`, `updatedAt` AS `updatedAt`
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE `main`.`InventoryTransfer`.`id` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query COMMIT
 PUT /api/transfers/cmlid98oe0001om7qle6uyimg 200 in 67ms (compile: 49ms, render: 17ms)
Fetching transfers with where clause: {}
 GET /api/branches 200 in 25ms (compile: 21ms, render: 4ms)
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`InventoryTransfer`.`id` FROM `main`.`InventoryTransfer` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT 1
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE 1=1 ORDER BY `main`.`InventoryTransfer`.`requestedAt` DESC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`name`, `main`.`User`.`username` FROM `main`.`User` WHERE `main`.`User`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`name`, `main`.`User`.`username` FROM `main`.`User` WHERE `main`.`User`.`id` IN (?) LIMIT ? OFFSET ?
Found transfers: 1
Total transfers: 1
 GET /api/transfers?status= 200 in 24ms (compile: 4ms, render: 19ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
 GET /api/ingredients 200 in 7ms (compile: 2ms, render: 4ms)
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE (`main`.`InventoryTransfer`.`id` = ? AND 1=1) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE ((`main`.`BranchInventory`.`branchId` = ? AND `main`.`BranchInventory`.`ingredientId` = ?) AND 1=1) LIMIT ? OFFSET ?
prisma:query UPDATE `main`.`BranchInventory` SET `currentStock` = (`main`.`BranchInventory`.`currentStock` + ?), `updatedAt` = ? WHERE (`main`.`BranchInventory`.`id` = ? AND 1=1) RETURNING `id` AS `id`, `branchId` AS `branchId`, `ingredientId` AS `ingredientId`, `currentStock` AS `currentStock`, `reservedStock` AS `reservedStock`, `expiryDate` AS `expiryDate`, `lastRestockAt` AS `lastRestockAt`, `lastModifiedAt` AS `lastModifiedAt`, `lastModifiedBy` AS `lastModifiedBy`, `createdAt` AS `createdAt`, `updatedAt` AS `updatedAt`
prisma:query UPDATE `main`.`InventoryTransferItem` SET `targetInventoryId` = ? WHERE (`main`.`InventoryTransferItem`.`id` = ? AND 1=1) RETURNING `id` AS `id`, `transferId` AS `transferId`, `ingredientId` AS `ingredientId`, `sourceInventoryId` AS `sourceInventoryId`, `targetInventoryId` AS `targetInventoryId`, `quantity` AS `quantity`, `unit` AS `unit`, `createdAt` AS `createdAt`
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE (`main`.`BranchInventory`.`id` = ? AND 1=1) LIMIT ? OFFSET ?
prisma:query UPDATE `main`.`BranchInventory` SET `currentStock` = (`main`.`BranchInventory`.`currentStock` - ?), `updatedAt` = ? WHERE (`main`.`BranchInventory`.`id` = ? AND 1=1) RETURNING `id` AS `id`, `branchId` AS `branchId`, `ingredientId` AS `ingredientId`, `currentStock` AS `currentStock`, `reservedStock` AS `reservedStock`, `expiryDate` AS `expiryDate`, `lastRestockAt` AS `lastRestockAt`, `lastModifiedAt` AS `lastModifiedAt`, `lastModifiedBy` AS `lastModifiedBy`, `createdAt` AS `createdAt`, `updatedAt` AS `updatedAt`
prisma:query INSERT INTO `main`.`InventoryTransaction` (`id`, `branchId`, `ingredientId`, `transactionType`, `quantityChange`, `stockBefore`, `stockAfter`, `reason`, `createdBy`, `createdAt`) VALUES (?,?,?,?,?,?,?,?,?,?) RETURNING `id` AS `id`, `branchId` AS `branchId`, `ingredientId` AS `ingredientId`, `transactionType` AS `transactionType`, `quantityChange` AS `quantityChange`, `stockBefore` AS `stockBefore`, `stockAfter` AS `stockAfter`, `orderId` AS `orderId`, `reason` AS `reason`, `createdBy` AS `createdBy`, `createdAt` AS `createdAt`
prisma:query INSERT INTO `main`.`InventoryTransaction` (`id`, `branchId`, `ingredientId`, `transactionType`, `quantityChange`, `stockBefore`, `stockAfter`, `reason`, `createdBy`, `createdAt`) VALUES (?,?,?,?,?,?,?,?,?,?) RETURNING `id` AS `id`, `branchId` AS `branchId`, `ingredientId` AS `ingredientId`, `transactionType` AS `transactionType`, `quantityChange` AS `quantityChange`, `stockBefore` AS `stockBefore`, `stockAfter` AS `stockAfter`, `orderId` AS `orderId`, `reason` AS `reason`, `createdBy` AS `createdBy`, `createdAt` AS `createdAt`
prisma:query BEGIN IMMEDIATE
prisma:query UPDATE `main`.`InventoryTransfer` SET `status` = ?, `completedBy` = ?, `completedAt` = ?, `updatedAt` = ? WHERE (`main`.`InventoryTransfer`.`id` = ? AND 1=1) RETURNING `id` AS `id`, `transferNumber` AS `transferNumber`, `sourceBranchId` AS `sourceBranchId`, `targetBranchId` AS `targetBranchId`, `status` AS `status`, `requestedAt` AS `requestedAt`, `completedAt` AS `completedAt`, `notes` AS `notes`, `requestedBy` AS `requestedBy`, `approvedBy` AS `approvedBy`, `approvedAt` AS `approvedAt`, `completedBy` AS `completedBy`, `createdAt` AS `createdAt`, `updatedAt` AS `updatedAt`
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE `main`.`InventoryTransfer`.`id` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query COMMIT
 PUT /api/transfers/cmlid98oe0001om7qle6uyimg 200 in 68ms (compile: 36ms, render: 32ms)
Fetching transfers with where clause: {}
prisma:query SELECT `main`.`InventoryTransfer`.`id`, `main`.`InventoryTransfer`.`transferNumber`, `main`.`InventoryTransfer`.`sourceBranchId`, `main`.`InventoryTransfer`.`targetBranchId`, `main`.`InventoryTransfer`.`status`, `main`.`InventoryTransfer`.`requestedAt`, `main`.`InventoryTransfer`.`completedAt`, `main`.`InventoryTransfer`.`notes`, `main`.`InventoryTransfer`.`requestedBy`, `main`.`InventoryTransfer`.`approvedBy`, `main`.`InventoryTransfer`.`approvedAt`, `main`.`InventoryTransfer`.`completedBy`, `main`.`InventoryTransfer`.`createdAt`, `main`.`InventoryTransfer`.`updatedAt` FROM `main`.`InventoryTransfer` WHERE 1=1 ORDER BY `main`.`InventoryTransfer`.`requestedAt` DESC LIMIT ? OFFSET ?
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`InventoryTransfer`.`id` FROM `main`.`InventoryTransfer` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`InventoryTransferItem`.`id`, `main`.`InventoryTransferItem`.`transferId`, `main`.`InventoryTransferItem`.`ingredientId`, `main`.`InventoryTransferItem`.`sourceInventoryId`, `main`.`InventoryTransferItem`.`targetInventoryId`, `main`.`InventoryTransferItem`.`quantity`, `main`.`InventoryTransferItem`.`unit`, `main`.`InventoryTransferItem`.`createdAt` FROM `main`.`InventoryTransferItem` WHERE `main`.`InventoryTransferItem`.`transferId` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`name`, `main`.`User`.`username` FROM `main`.`User` WHERE `main`.`User`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`name`, `main`.`User`.`username` FROM `main`.`User` WHERE `main`.`User`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`name`, `main`.`User`.`username` FROM `main`.`User` WHERE `main`.`User`.`id` IN (?) LIMIT ? OFFSET ?
Found transfers: 1
Total transfers: 1
 GET /api/transfers?status= 200 in 14ms (compile: 2ms, render: 11ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
 GET /api/branches 200 in 10ms (compile: 8ms, render: 3ms)
 GET /api/ingredients 200 in 13ms (compile: 2ms, render: 10ms)
 GET /api/branches 200 in 6ms (compile: 1746µs, render: 4ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
 GET /api/ingredients 200 in 9ms (compile: 1544µs, render: 7ms)
prisma:query SELECT `main`.`WasteLog`.`id`, `main`.`WasteLog`.`branchId`, `main`.`WasteLog`.`ingredientId`, `main`.`WasteLog`.`quantity`, `main`.`WasteLog`.`unit`, `main`.`WasteLog`.`reason`, `main`.`WasteLog`.`lossValue`, `main`.`WasteLog`.`notes`, `main`.`WasteLog`.`recordedBy`, `main`.`WasteLog`.`createdAt` FROM `main`.`WasteLog` WHERE 1=1 LIMIT ? OFFSET ?
 GET /api/waste-logs/stats 200 in 211ms (compile: 175ms, render: 36ms)
 GET /api/waste-logs 200 in 242ms (compile: 229ms, render: 13ms)
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`WasteLog`.`id` FROM `main`.`WasteLog` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`WasteLog`.`id`, `main`.`WasteLog`.`branchId`, `main`.`WasteLog`.`ingredientId`, `main`.`WasteLog`.`quantity`, `main`.`WasteLog`.`unit`, `main`.`WasteLog`.`reason`, `main`.`WasteLog`.`lossValue`, `main`.`WasteLog`.`notes`, `main`.`WasteLog`.`recordedBy`, `main`.`WasteLog`.`createdAt` FROM `main`.`WasteLog` WHERE 1=1 ORDER BY `main`.`WasteLog`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/branches 200 in 5ms (compile: 1768µs, render: 3ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
 GET /api/ingredients 200 in 6ms (compile: 1278µs, render: 4ms)
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`WasteLog`.`id` FROM `main`.`WasteLog` WHERE 1=1 LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`WasteLog`.`id`, `main`.`WasteLog`.`branchId`, `main`.`WasteLog`.`ingredientId`, `main`.`WasteLog`.`quantity`, `main`.`WasteLog`.`unit`, `main`.`WasteLog`.`reason`, `main`.`WasteLog`.`lossValue`, `main`.`WasteLog`.`notes`, `main`.`WasteLog`.`recordedBy`, `main`.`WasteLog`.`createdAt` FROM `main`.`WasteLog` WHERE 1=1 ORDER BY `main`.`WasteLog`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/waste-logs 200 in 8ms (compile: 2ms, render: 6ms)
prisma:query SELECT `main`.`WasteLog`.`id`, `main`.`WasteLog`.`branchId`, `main`.`WasteLog`.`ingredientId`, `main`.`WasteLog`.`quantity`, `main`.`WasteLog`.`unit`, `main`.`WasteLog`.`reason`, `main`.`WasteLog`.`lossValue`, `main`.`WasteLog`.`notes`, `main`.`WasteLog`.`recordedBy`, `main`.`WasteLog`.`createdAt` FROM `main`.`WasteLog` WHERE 1=1 LIMIT ? OFFSET ?
 GET /api/waste-logs/stats 200 in 5ms (compile: 1199µs, render: 4ms)
 GET /api/branches 200 in 10ms (compile: 3ms, render: 7ms)
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`isActive`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`createdAt` FROM `main`.`Branch` WHERE `main`.`Branch`.`isActive` = ? ORDER BY `main`.`Branch`.`branchName` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`WasteLog`.`id`, `main`.`WasteLog`.`branchId`, `main`.`WasteLog`.`ingredientId`, `main`.`WasteLog`.`quantity`, `main`.`WasteLog`.`unit`, `main`.`WasteLog`.`reason`, `main`.`WasteLog`.`lossValue`, `main`.`WasteLog`.`notes`, `main`.`WasteLog`.`recordedBy`, `main`.`WasteLog`.`createdAt` FROM `main`.`WasteLog` WHERE `main`.`WasteLog`.`branchId` = ? ORDER BY `main`.`WasteLog`.`createdAt` DESC LIMIT ? OFFSET ?
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`WasteLog`.`id` FROM `main`.`WasteLog` WHERE `main`.`WasteLog`.`branchId` = ? LIMIT ? OFFSET ?) AS `sub`
 GET /api/waste-logs?branchId=cml46do4s0001ob5gs267tqmu 200 in 12ms (compile: 2ms, render: 9ms)
 GET /api/ingredients 200 in 13ms (compile: 7ms, render: 6ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`WasteLog`.`id`, `main`.`WasteLog`.`branchId`, `main`.`WasteLog`.`ingredientId`, `main`.`WasteLog`.`quantity`, `main`.`WasteLog`.`unit`, `main`.`WasteLog`.`reason`, `main`.`WasteLog`.`lossValue`, `main`.`WasteLog`.`notes`, `main`.`WasteLog`.`recordedBy`, `main`.`WasteLog`.`createdAt` FROM `main`.`WasteLog` WHERE `main`.`WasteLog`.`branchId` = ? LIMIT ? OFFSET ?
 GET /api/waste-logs/stats?branchId=cml46do4s0001ob5gs267tqmu 200 in 7ms (compile: 1804µs, render: 5ms)
prisma:query SELECT 1
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE (`main`.`Ingredient`.`id` = ? AND 1=1) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE ((`main`.`BranchInventory`.`branchId` = ? AND `main`.`BranchInventory`.`ingredientId` = ?) AND 1=1) LIMIT ? OFFSET ?
prisma:query UPDATE `main`.`BranchInventory` SET `currentStock` = (`main`.`BranchInventory`.`currentStock` - ?), `updatedAt` = ? WHERE (`main`.`BranchInventory`.`id` = ? AND 1=1) RETURNING `id` AS `id`, `branchId` AS `branchId`, `ingredientId` AS `ingredientId`, `currentStock` AS `currentStock`, `reservedStock` AS `reservedStock`, `expiryDate` AS `expiryDate`, `lastRestockAt` AS `lastRestockAt`, `lastModifiedAt` AS `lastModifiedAt`, `lastModifiedBy` AS `lastModifiedBy`, `createdAt` AS `createdAt`, `updatedAt` AS `updatedAt`
prisma:query BEGIN IMMEDIATE
prisma:query INSERT INTO `main`.`WasteLog` (`id`, `branchId`, `ingredientId`, `quantity`, `unit`, `reason`, `lossValue`, `notes`, `recordedBy`, `createdAt`) VALUES (?,?,?,?,?,?,?,?,?,?) RETURNING `id` AS `id`
prisma:query SELECT `main`.`WasteLog`.`id`, `main`.`WasteLog`.`branchId`, `main`.`WasteLog`.`ingredientId`, `main`.`WasteLog`.`quantity`, `main`.`WasteLog`.`unit`, `main`.`WasteLog`.`reason`, `main`.`WasteLog`.`lossValue`, `main`.`WasteLog`.`notes`, `main`.`WasteLog`.`recordedBy`, `main`.`WasteLog`.`createdAt` FROM `main`.`WasteLog` WHERE `main`.`WasteLog`.`id` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`name`, `main`.`User`.`username` FROM `main`.`User` WHERE `main`.`User`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query COMMIT
prisma:query INSERT INTO `main`.`InventoryTransaction` (`id`, `branchId`, `ingredientId`, `transactionType`, `quantityChange`, `stockBefore`, `stockAfter`, `reason`, `createdBy`, `createdAt`) VALUES (?,?,?,?,?,?,?,?,?,?) RETURNING `id` AS `id`, `branchId` AS `branchId`, `ingredientId` AS `ingredientId`, `transactionType` AS `transactionType`, `quantityChange` AS `quantityChange`, `stockBefore` AS `stockBefore`, `stockAfter` AS `stockAfter`, `orderId` AS `orderId`, `reason` AS `reason`, `createdBy` AS `createdBy`, `createdAt` AS `createdAt`
 POST /api/waste-logs 201 in 13ms (compile: 1724µs, render: 11ms)
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS `_count$_all` FROM (SELECT `main`.`WasteLog`.`id` FROM `main`.`WasteLog` WHERE `main`.`WasteLog`.`branchId` = ? LIMIT ? OFFSET ?) AS `sub`
prisma:query SELECT `main`.`WasteLog`.`id`, `main`.`WasteLog`.`branchId`, `main`.`WasteLog`.`ingredientId`, `main`.`WasteLog`.`quantity`, `main`.`WasteLog`.`unit`, `main`.`WasteLog`.`reason`, `main`.`WasteLog`.`lossValue`, `main`.`WasteLog`.`notes`, `main`.`WasteLog`.`recordedBy`, `main`.`WasteLog`.`createdAt` FROM `main`.`WasteLog` WHERE `main`.`WasteLog`.`branchId` = ? ORDER BY `main`.`WasteLog`.`createdAt` DESC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Branch`.`id`, `main`.`Branch`.`branchName`, `main`.`Branch`.`licenseKey`, `main`.`Branch`.`licenseExpiresAt`, `main`.`Branch`.`isActive`, `main`.`Branch`.`lastSyncAt`, `main`.`Branch`.`menuVersion`, `main`.`Branch`.`pricingVersion`, `main`.`Branch`.`recipeVersion`, `main`.`Branch`.`ingredientVersion`, `main`.`Branch`.`userVersion`, `main`.`Branch`.`createdAt`, `main`.`Branch`.`updatedAt`, `main`.`Branch`.`serialYear`, `main`.`Branch`.`lastSerial` FROM `main`.`Branch` WHERE `main`.`Branch`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`User`.`id`, `main`.`User`.`name`, `main`.`User`.`username` FROM `main`.`User` WHERE `main`.`User`.`id` IN (?) LIMIT ? OFFSET ?
 GET /api/branches 200 in 7ms (compile: 3ms, render: 4ms)
 GET /api/waste-logs?branchId=cml46do4s0001ob5gs267tqmu 200 in 14ms (compile: 1803µs, render: 12ms)
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE 1=1 ORDER BY `main`.`Ingredient`.`name` ASC LIMIT ? OFFSET ?
 GET /api/ingredients 200 in 11ms (compile: 2ms, render: 9ms)
prisma:query SELECT `main`.`WasteLog`.`id`, `main`.`WasteLog`.`branchId`, `main`.`WasteLog`.`ingredientId`, `main`.`WasteLog`.`quantity`, `main`.`WasteLog`.`unit`, `main`.`WasteLog`.`reason`, `main`.`WasteLog`.`lossValue`, `main`.`WasteLog`.`notes`, `main`.`WasteLog`.`recordedBy`, `main`.`WasteLog`.`createdAt` FROM `main`.`WasteLog` WHERE `main`.`WasteLog`.`branchId` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`costPerUnit`, `main`.`Ingredient`.`reorderThreshold`, `main`.`Ingredient`.`alertThreshold`, `main`.`Ingredient`.`version`, `main`.`Ingredient`.`createdAt`, `main`.`Ingredient`.`updatedAt` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?) LIMIT ? OFFSET ?
 GET /api/waste-logs/stats?branchId=cml46do4s0001ob5gs267tqmu 200 in 13ms (compile: 6ms, render: 7ms)
prisma:query SELECT `main`.`Customer`.`id`, `main`.`Customer`.`name`, `main`.`Customer`.`phone`, `main`.`Customer`.`email`, `main`.`Customer`.`notes`, `main`.`Customer`.`branchId`, `main`.`Customer`.`loyaltyPoints`, `main`.`Customer`.`tier`, `main`.`Customer`.`totalSpent`, `main`.`Customer`.`orderCount`, `main`.`Customer`.`createdAt`, `main`.`Customer`.`updatedAt` FROM `main`.`Customer` WHERE 1=1 ORDER BY `main`.`Customer`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/customers? 200 in 10ms (compile: 3ms, render: 7ms)
 GET /api/customers?currentUserRole=ADMIN&currentUserBranchId= 200 in 10ms (compile: 3ms, render: 7ms)
prisma:query SELECT `main`.`Customer`.`id`, `main`.`Customer`.`name`, `main`.`Customer`.`phone`, `main`.`Customer`.`email`, `main`.`Customer`.`notes`, `main`.`Customer`.`branchId`, `main`.`Customer`.`loyaltyPoints`, `main`.`Customer`.`tier`, `main`.`Customer`.`totalSpent`, `main`.`Customer`.`orderCount`, `main`.`Customer`.`createdAt`, `main`.`Customer`.`updatedAt` FROM `main`.`Customer` WHERE 1=1 ORDER BY `main`.`Customer`.`createdAt` DESC LIMIT ? OFFSET ?
 GET /api/branches 200 in 5ms (compile: 2ms, render: 3ms)
prisma:query SELECT `main`.`DeliveryArea`.`id`, `main`.`DeliveryArea`.`name`, `main`.`DeliveryArea`.`fee`, `main`.`DeliveryArea`.`isActive`, `main`.`DeliveryArea`.`createdAt`, `main`.`DeliveryArea`.`updatedAt` FROM `main`.`DeliveryArea` WHERE 1=1 ORDER BY `main`.`DeliveryArea`.`name` ASC LIMIT ? OFFSET ?
 GET /api/delivery-areas 200 in 9ms (compile: 5ms, render: 4ms)
 GET /api/branches 200 in 5ms (compile: 1719µs, render: 3ms)
 GET /api/delivery-areas 200 in 7ms (compile: 1435µs, render: 6ms)
prisma:query SELECT `main`.`DeliveryArea`.`id`, `main`.`DeliveryArea`.`name`, `main`.`DeliveryArea`.`fee`, `main`.`DeliveryArea`.`isActive`, `main`.`DeliveryArea`.`createdAt`, `main`.`DeliveryArea`.`updatedAt` FROM `main`.`DeliveryArea` WHERE 1=1 ORDER BY `main`.`DeliveryArea`.`name` ASC LIMIT ? OFFSET ?
 GET /api/menu-items?active=true&includeVariants=true 200 in 11ms (compile: 3ms, render: 8ms)
prisma:query SELECT `main`.`MenuItem`.`id`, `main`.`MenuItem`.`name`, `main`.`MenuItem`.`category`, `main`.`MenuItem`.`categoryId`, `main`.`MenuItem`.`price`, `main`.`MenuItem`.`taxRate`, `main`.`MenuItem`.`isActive`, `main`.`MenuItem`.`imagePath`, `main`.`MenuItem`.`sortOrder`, `main`.`MenuItem`.`hasVariants`, `main`.`MenuItem`.`version`, `main`.`MenuItem`.`createdAt`, `main`.`MenuItem`.`updatedAt` FROM `main`.`MenuItem` WHERE `main`.`MenuItem`.`isActive` = ? ORDER BY `main`.`MenuItem`.`sortOrder` ASC, `main`.`MenuItem`.`name` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Recipe`.`id`, `main`.`Recipe`.`menuItemId`, `main`.`Recipe`.`ingredientId`, `main`.`Recipe`.`quantityRequired`, `main`.`Recipe`.`unit`, `main`.`Recipe`.`menuItemVariantId`, `main`.`Recipe`.`version`, `main`.`Recipe`.`createdAt`, `main`.`Recipe`.`updatedAt` FROM `main`.`Recipe` WHERE `main`.`Recipe`.`menuItemId` IN (?,?,?,?,?,?,?,?,?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Category`.`id`, `main`.`Category`.`name` FROM `main`.`Category` WHERE `main`.`Category`.`id` IN (?,?,?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`MenuItemVariant`.`id`, `main`.`MenuItemVariant`.`menuItemId`, `main`.`MenuItemVariant`.`variantTypeId`, `main`.`MenuItemVariant`.`variantOptionId`, `main`.`MenuItemVariant`.`priceModifier`, `main`.`MenuItemVariant`.`sortOrder`, `main`.`MenuItemVariant`.`isActive`, `main`.`MenuItemVariant`.`createdAt`, `main`.`MenuItemVariant`.`updatedAt` FROM `main`.`MenuItemVariant` WHERE `main`.`MenuItemVariant`.`menuItemId` IN (?,?,?,?,?,?,?,?,?) ORDER BY `main`.`MenuItemVariant`.`sortOrder` ASC LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Category`.`id`, `main`.`Category`.`name`, `main`.`Category`.`description`, `main`.`Category`.`sortOrder`, `main`.`Category`.`isActive`, `main`.`Category`.`defaultVariantTypeId`, `main`.`Category`.`createdAt`, `main`.`Category`.`updatedAt`, COALESCE(`aggr_selection_0_MenuItem`.`_aggr_count_menuItems`, 0) AS `_aggr_count_menuItems` FROM `main`.`Category` LEFT JOIN (SELECT `main`.`MenuItem`.`categoryId`, COUNT(*) AS `_aggr_count_menuItems` FROM `main`.`MenuItem` WHERE 1=1 GROUP BY `main`.`MenuItem`.`categoryId`) AS `aggr_selection_0_MenuItem` ON (`main`.`Category`.`id` = `aggr_selection_0_MenuItem`.`categoryId`) WHERE `main`.`Category`.`isActive` = ? ORDER BY `main`.`Category`.`sortOrder` ASC, `main`.`Category`.`name` ASC LIMIT ? OFFSET ?
 GET /api/categories?active=true 200 in 11ms (compile: 5ms, render: 6ms)
 GET /api/inventory/low-stock?branchId=cml46do4s0001ob5gs267tqmu 200 in 6ms (compile: 2ms, render: 4ms)
prisma:query SELECT `main`.`BranchInventory`.`id`, `main`.`BranchInventory`.`branchId`, `main`.`BranchInventory`.`ingredientId`, `main`.`BranchInventory`.`currentStock`, `main`.`BranchInventory`.`reservedStock`, `main`.`BranchInventory`.`expiryDate`, `main`.`BranchInventory`.`lastRestockAt`, `main`.`BranchInventory`.`lastModifiedAt`, `main`.`BranchInventory`.`lastModifiedBy`, `main`.`BranchInventory`.`createdAt`, `main`.`BranchInventory`.`updatedAt` FROM `main`.`BranchInventory` WHERE `main`.`BranchInventory`.`branchId` = ? LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Ingredient`.`id`, `main`.`Ingredient`.`name`, `main`.`Ingredient`.`unit`, `main`.`Ingredient`.`reorderThreshold` FROM `main`.`Ingredient` WHERE `main`.`Ingredient`.`id` IN (?,?,?,?,?) LIMIT ? OFFSET ?
prisma:query SELECT `main`.`Courier`.`id`, `main`.`Courier`.`name`, `main`.`Courier`.`phone`, `main`.`Courier`.`branchId`, `main`.`Courier`.`isActive`, `main`.`Courier`.`createdAt`, `main`.`Courier`.`updatedAt` FROM `main`.`Courier` WHERE `main`.`Courier`.`branchId` = ? ORDER BY `main`.`Courier`.`name` ASC LIMIT ? OFFSET ?
 GET /api/couriers?branchId=cml46do4s0001ob5gs267tqmu 200 in 6ms (compile: 3ms, render: 3ms)
